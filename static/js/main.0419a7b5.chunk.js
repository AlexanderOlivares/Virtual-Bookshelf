(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var c,o,i,r=n(3),s=n.n(r),a=n(41),l=n.n(a),u=(n(60),n(5)),j=n(37),d=(n(103),n(61),j.a.initializeApp({apiKey:"AIzaSyCf9iZTemnGhKa5eEi6wzFTbXk_cXmAHK4",authDomain:"booklist-305815.firebaseapp.com",projectId:"booklist-305815",storageBucket:"booklist-305815.appspot.com",messagingSenderId:"431504889946",appId:"1:431504889946:web:df1a1b10e369196c26a063",measurementId:"G-B2T1XPJ8CT"})),b=d.auth(),h=new j.a.auth.GoogleAuthProvider,O=j.a.firestore(),x=n(12),m=n(9),f=n(8),g=n(10),p=n(22),v=n(45),y=n(25),k={background:"#222831",color:"#eeeeee"},w={background:"#eeeeee",color:"#222831"},I=n(2),S=f.c.nav(c||(c=Object(g.a)(["\n  position: -webkit-sticky; /* Safari */\n  position: sticky;\n  top: 0;\n  font-size: 20px;\n  background-color: #00adb5;\n  padding: 15px;\n"]))),C=f.c.span(o||(o=Object(g.a)(["\n  padding: 10px;\n  margin: 10px;\n"]))),L=f.c.button(i||(i=Object(g.a)(["\n  border: none;\n  background-color: #eeeeee;\n  border: 2px solid #222831;\n  font-size: 14px;\n  margin-left: 5px;\n  padding: 5px;\n  border-radius: 5px;\n"])));var E,U,D,z=function(e){var t=e.theme,n=e.setTheme,c=e.setIsLoggedIn,o=e.isLoggedIn,i=e.setUsername,r=e.setUserEmail;return Object(I.jsxs)(S,{children:[Object(I.jsx)(C,{children:Object(I.jsx)(x.b,{to:"/",children:Object(I.jsx)(v.a,{})})}),Object(I.jsx)(C,{children:Object(I.jsx)(x.b,{to:"/shelf",children:Object(I.jsx)(p.b,{})})}),Object(I.jsx)(C,{onClick:function(){n(t===k?w:k)},children:t===w?Object(I.jsx)(y.b,{}):Object(I.jsx)(y.c,{})}),Object(I.jsx)(C,{children:Object(I.jsx)(x.b,{to:"/search",children:Object(I.jsx)(v.b,{})})}),o?Object(I.jsx)(L,{onClick:function(){b.signOut().then((function(){c(null),i(""),r(null)})).catch((function(e){console.log("Could not log out ".concat(e))}))},children:Object(I.jsx)(x.b,{to:"/",children:"Sign Out"})}):Object(I.jsx)(L,{children:Object(I.jsx)(x.b,{to:"/signin",children:"Sign in"})})]})},_=n(21),F=n(24),P=n(104),T=n(15),R=n.n(T),A=Object(f.b)(E||(E=Object(g.a)(["\n  html, body {\n    text-align: center;\n    background: ",";\n    color: ",'; \n    transition: all .3s ease;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    text-align: center;\n    width: 85%;\n    margin: 0 auto;\n    padding: 20px;\n    overflow-x: "hidden"; \n  }\n\n  a { \n    color: #1b262c;\n    text-decoration: none;\n  }\n\n  button {\n    border-radius: 5px;\n    font-size: 14px;\n    margin: 3px;\n    margin-top: 15px;\n    border: 2px solid #222831;\n    background-color: #eeeeee;\n  }\n\n'])),(function(e){return e.theme.background}),(function(e){return e.theme.color})),q={overlay:{position:"fixed",textAlign:"center",vertialAlign:"middle",height:"95%",backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",border:"1px solid #ccc",overflowX:"auto",WebkitOverflowScrolling:"touch",borderRadius:"5px",outline:"none",textAlign:"center"}},B=n(29),G=n(20),W=n(23),N=f.c.div(U||(U=Object(g.a)(["\n  margin-top: 35px;\n  flex-grow: 1;\n"]))),Y=f.c.div(D||(D=Object(g.a)(["\n  margin: 0 auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: stretch;\n  align-items: center;\n  padding: 5px;\n\n  @media (min-width: 900px) {\n    max-width: 65%;\n  }\n\n  @media (min-width: 2500px) {\n    max-width: 45%;\n  }\n"])));var V,K,Z,M,J,X,H=function(e){var t=e.user_UID,n=e.isLoggedIn,c=e.username,o=e.theme;q.content.background=o.background;var i=Object(r.useState)(""),s=Object(u.a)(i,2),a=s[0],l=s[1],j=Object(r.useState)([]),d=Object(u.a)(j,2),b=d[0],h=d[1],x=Object(r.useState)(Object(P.a)()),m=Object(u.a)(x,2),f=m[0],g=m[1],v=Object(r.useState)([]),y=Object(u.a)(v,2),k=y[0],w=y[1],S=Object(r.useState)(!1),C=Object(u.a)(S,2),L=C[0],E=C[1],U=Object(r.useState)(-1),D=Object(u.a)(U,2),z=D[0],T=D[1];function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;T(e),E((function(e){return!e}))}return Object(r.useEffect)((function(){O.collection("users/".concat(t,"/shelf")).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(F.a)({title:e.id},e.data())}));w(t)}))}),[]),Object(I.jsxs)("div",{children:[n&&Object(I.jsxs)("div",{children:[Object(I.jsx)(B.a,{}),Object(I.jsx)(de,{children:"".concat(c)})]}),Object(I.jsx)("h1",{children:"Search Books"}),!b.length&&Object(I.jsx)(p.a,{size:170,style:{margin:20}}),!n&&Object(I.jsx)("h4",{children:"Sign in or create an account to add books to your shelf"}),Object(I.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(a,"&key=").concat("AIzaSyAbYe2Z2WiZ0YeiDo8Ohqx4eG41ZY--nA4","&maxResults=40")).then((function(e){if(e.ok||alert("Error getting books from Google Books"+e),e.ok)return e.json()})).then((function(e){var t=e.items.filter((function(e){return e.volumeInfo.imageLinks&&e.volumeInfo.description&&e.volumeInfo.authors}));h(t)})).catch((function(e){alert("Error coult not fetch books ".concat(e))})),g(Object(P.a)())},children:[Object(I.jsx)("input",{value:a,onChange:function(e){l(e.currentTarget.value)}}),Object(I.jsx)("button",{style:{fontSize:16,margin:10},type:"submit",children:"search"})]},f),Object(I.jsx)(Y,{children:b&&b.map((function(e,c){return Object(I.jsxs)(N,{children:[Object(I.jsx)("img",{width:"128",height:"195",src:e.volumeInfo.imageLinks.thumbnail,alt:e.volumeInfo.title}),Object(I.jsx)("br",{}),Object(I.jsx)("button",{onClick:function(){return A(c)},children:Object(I.jsx)(W.a,{})}),n&&Object(I.jsx)("button",{onClick:function(){return function(e){var n=O.collection("users").doc("".concat(t)).collection("shelf").doc("".concat(e.volumeInfo.title));n.get().then((function(t){t.exists?(n.delete().then((function(){return console.log("book deleted")})).catch((function(e){return console.error("could not delete book"+e)})),w(k.filter((function(t){return t.title!==e.volumeInfo.title&&t.description!==e.volumeInfo.description})))):(n.set({title:e.volumeInfo.title,author:e.volumeInfo.authors.join(", "),thumbnail:e.volumeInfo.imageLinks.thumbnail,description:e.volumeInfo.description}).then((function(){console.log("book successfully saved")})).catch((function(e){alert("Please sign in or create an account to add books to your shelf"),console.error("error writing doc: ",e)})),w((function(t){return[].concat(Object(_.a)(t),[{title:e.volumeInfo.title,author:e.volumeInfo.authors,thumbnail:e.volumeInfo.imageLinks.thumbnail,description:e.volumeInfo.description}])})))}))}(e)},children:k.filter((function(t){return t.description===e.volumeInfo.description})).length?Object(I.jsx)(G.b,{}):"add to shelf"})]},Object(P.a)())}))}),function(e){var t=b[e];return t&&Object(I.jsxs)(R.a,{theme:o,style:q,isOpen:L,modalIndex:e,onRequestClose:function(){return A()},children:[Object(I.jsx)("button",{style:{position:"absolute",top:5,left:5,border:"none"},onClick:function(){return A()},children:Object(I.jsx)(G.a,{size:20})}),Object(I.jsx)("div",{children:Object(I.jsx)("img",{src:t.volumeInfo.imageLinks.thumbnail,alt:t.volumeInfo.title})}),Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{children:t.volumeInfo.description}),Object(I.jsx)("p",{children:"by ".concat(t.volumeInfo.authors.join(", "))})]}),Object(I.jsx)("div",{children:Object(I.jsx)("button",{onClick:function(){return A()},children:"close"})})]})}(z)]})},Q=n(28),$=n(30),ee=f.c.form(V||(V=Object(g.a)(["\n  margin: 0 auto;\n  width: 85%;\n  max-width: 1400px;\n  display: block;\n  padding: 5px;\n"]))),te=f.c.input(K||(K=Object(g.a)(["\n  width: 75%;\n  border-radius: 5px;\n  font-size: 16px;\n  padding: 5px;\n  margin: 5px;\n"]))),ne=f.c.p(Z||(Z=Object(g.a)(["\n  font-size: 12px;\n  margin: 10px;\n"]))),ce=f.c.button(M||(M=Object(g.a)(["\n  height: 2.5em;\n  border-radius: 5px;\n  background-color: #d84b37;\n  font-size: 18px;\n  margin: 10px;\n"]))),oe=f.c.button(J||(J=Object(g.a)(["\n  height: 2em;\n  border-radius: 5px;\n  font-size: 16px;\n  border-radius: 5px;\n  margin: 20px;\n  background-color: #00adb5;\n"]))),ie=f.c.div(X||(X=Object(g.a)(["\n  margin: 0 auto;\n  width: 85%;\n  max-width: 1400px;\n  display: block;\n  padding: 5px;\n  text-align: center;\n"])));var re,se,ae,le=function(e){var t=e.username,n=e.setUsername,c=e.isLoggedIn,o=e.setIsLoggedIn,i=e.theme,s=e.user_UID;q.content.background=i.background;var a=Object(r.useState)(!1),l=Object(u.a)(a,2),j=l[0],d=l[1],m=Object(r.useState)(""),f=Object(u.a)(m,2),g=f[0],p=f[1],v=Object(r.useState)({username:"",email:"",password:"",confirmPassword:""}),y=Object(u.a)(v,2),k=y[0],w=y[1],S=Object(r.useState)(Object(P.a)()),C=Object(u.a)(S,2),L=C[0];function E(e){var t=e.target,n=t.name,c=t.value;w((function(e){return Object(F.a)(Object(F.a)({},e),{},Object(Q.a)({},n,c))}))}function U(e){p(e.currentTarget.value)}function D(e){e.preventDefault();var t=g;b.sendPasswordResetEmail(t).then((function(){alert("check your email for reset instructions"),d(!1)})).catch((function(e){alert(e+"could not send reset password email"),console.error(e+"could not send reset password email")}))}return C[1],Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{children:c?Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(H,{theme:i,username:t,isLoggedIn:c,user_UID:s})}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h3",{children:"Create Your Account"}),Object(I.jsx)(ie,{children:Object(I.jsxs)(ce,{name:"googleSignIn",onClick:function(){n(t),b.signInWithPopup(h).then((function(){o(!0)})).catch((function(e){var t=e.code,n=e.message;o(null),alert("Could not signup: ".concat(t,". ").concat(n))}))},children:[Object(I.jsx)($.a,{size:25})," Sign up with Google"]})}),Object(I.jsxs)(ee,{onSubmit:function(e){e.preventDefault();var t=k.username,c=k.email,o=k.password,i=k.confirmPassword;/^.{6,25}$/g.test(o)?o===i?(n(t),b.createUserWithEmailAndPassword(c,o).then((function(e){return O.collection("users").doc(e.user.uid).set({username:t,email:c,uid:e.user.uid})})).catch((function(e){alert("Error. Could not create account. Please Try again. ".concat(e.code))}))):alert("passwords do not match"):alert("password must be between 6 and 25 characters long")},children:[Object(I.jsx)("h4",{children:"Register"}),Object(I.jsx)(te,{required:!0,maxLength:"75",name:"username",placeholder:"pick a username",onChange:E}),Object(I.jsx)("br",{}),Object(I.jsx)(te,{type:"email",required:!0,minLength:"6",maxLength:"75",name:"email",placeholder:"your email",onChange:E}),Object(I.jsx)("br",{}),Object(I.jsx)("br",{}),Object(I.jsx)(te,{required:!0,placeholder:"create a password",name:"password",type:"password",onChange:E}),Object(I.jsx)(te,{required:!0,placeholder:"confirm your password",name:"confirmPassword",type:"password",onChange:E}),Object(I.jsx)(ne,{children:"Password must be at least 6 characters long"}),Object(I.jsx)(oe,{type:"submit",children:"create my account"}),Object(I.jsx)("hr",{}),Object(I.jsx)("div",{children:Object(I.jsxs)("p",{children:["Already have an account?",Object(I.jsx)("br",{}),Object(I.jsx)(oe,{children:Object(I.jsx)(x.b,{to:"/signin",children:"sign in"})})]})})]},L),Object(I.jsx)(ie,{children:Object(I.jsxs)("p",{children:["Forgot Your Password?",Object(I.jsx)("br",{}),Object(I.jsx)(oe,{onClick:function(){return d(!0)},children:"reset password"})]})})]})}),Object(I.jsx)("div",{children:Object(I.jsx)(R.a,{theme:i,isOpen:j,onRequestClose:function(){return d(!1)},style:q,children:Object(I.jsxs)(ee,{onSubmit:D,children:[Object(I.jsx)("h3",{children:"Password Reset"}),Object(I.jsx)("p",{children:"An email with reset instructions will be sent to:"}),Object(I.jsx)("input",{style:{margin:20},onChange:U,placeholder:"yourname@email.com",type:"email",name:"email",required:!0}),Object(I.jsx)("br",{}),Object(I.jsx)("button",{type:"submit",style:{margin:5},children:"send email"}),Object(I.jsx)("button",{onClick:function(){return d(!1)},style:{margin:5},children:"cancel"})]})})})]})},ue=n(31),je=n.n(ue);R.a.setAppElement("#root");var de=f.c.p(re||(re=Object(g.a)(["\n  font-size: 18px;\n  display: inline;\n  padding: 10px;\n"]))),be=f.c.p(se||(se=Object(g.a)(["\n  margin: 0 auto;\n  max-width: 75%;\n  padding: 20px;\n"]))),he=f.c.button(ae||(ae=Object(g.a)(["\n  display: inline;\n  margin: 20px;\n  padding: 5px;\n"])));var Oe=function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn,c=e.username,o=e.user_UID,i=e.theme;q.content.background=i.background;var s=Object(r.useState)([]),a=Object(u.a)(s,2),l=a[0],j=a[1],d=Object(r.useState)([]),m=Object(u.a)(d,2),f=m[0],g=m[1],p=Object(r.useState)(!1),v=Object(u.a)(p,2),k=v[0],w=v[1],S=Object(r.useState)(-1),C=Object(u.a)(S,2),L=C[0],E=C[1];function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;E(e),w((function(e){return!e}))}return Object(r.useEffect)((function(){O.collection("users/".concat(o,"/shelf")).onSnapshot((function(e){e.forEach((function(e){var t=e.data();g((function(e){return[].concat(Object(_.a)(e),[{title:t.title,thumbnail_URL:t.thumbnail,author:t.author,description:t.description}])}))}))}))}),[]),Object(r.useEffect)((function(){fetch("https://api.nytimes.com/svc/books/v3/lists/current/hardcover-nonfiction.json?api-key=".concat("ZBNkKwVoxAnqdKFd3GyMy5QVkohGhdnD")).then((function(e){if(e.ok)return e.json()})).then((function(e){j(e.results.books)})).catch((function(e){return console.error("error: ".concat(e))}))}),[]),Object(I.jsxs)("div",{children:[t?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{children:[Object(I.jsx)(B.a,{}),Object(I.jsx)(de,{children:"".concat(c)})]}),Object(I.jsx)(he,{children:Object(I.jsx)(x.b,{to:"/shelf",children:"go to my shelf"})}),Object(I.jsx)(he,{children:Object(I.jsx)(x.b,{to:"/search",children:"search all books"})})]}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("h1",{children:"My Virtual Bookshelf"}),Object(I.jsx)(y.a,{size:140}),Object(I.jsxs)(be,{children:["Miss the feeling of putting hardcovers and paperbacks on your bookshelf? If you listen to audiobooks or read e-books now you can visualize your collection with Virtual Bookshelf. Create an account, search for books to add to your shelf and show your friends what you've been reading!",Object(I.jsx)("br",{})]}),Object(I.jsxs)("div",{children:[Object(I.jsx)("h5",{children:"Create an Account or sign up with Google"}),Object(I.jsx)(ce,{style:{backgroundColor:"#00adb5"},children:Object(I.jsx)(x.b,{to:"/signup",children:"Sign up"})}),Object(I.jsxs)(ce,{name:"googleSignIn",onClick:function(){b.signInWithPopup(h).then((function(){n(!0)})).catch((function(e){var t=e.code,n=e.message;alert("Error could not sign in. Please Try again."),console.warn("".concat(t,". ").concat(n))}))},children:[Object(I.jsx)($.a,{size:25})," Sign up with Google"]})]})]}),Object(I.jsxs)("div",{children:[Object(I.jsx)("h3",{children:"What have you read lately?"}),Object(I.jsx)("h5",{style:{textDecoration:"underline"},children:"NYT Best Sellers"}),l.length?l.map((function(e,n){return Object(I.jsxs)(N,{children:[Object(I.jsx)("img",{style:{maxWidth:"100%"},src:e.book_image,alt:e.title}),Object(I.jsx)("div",{children:e.title}),Object(I.jsx)("div",{children:e.contributor}),Object(I.jsxs)("div",{children:["Rank: ",e.rank]}),Object(I.jsx)("button",{onClick:function(){return U(n)},children:Object(I.jsx)(W.a,{size:16})}),t&&Object(I.jsx)("button",{onClick:function(){return function(e){var t=O.collection("users").doc("".concat(o)).collection("shelf").doc("".concat(e.title));t.get().then((function(n){n.exists?(t.delete().then((function(){return console.log("book deleted")})).catch((function(e){return alert("could not delete book"+e)})),g(f.filter((function(t){return t.title!==e.title})))):(t.set({title:e.title,author:e.author,thumbnail:e.book_image,description:e.description}).then((function(){console.log("doc successfully written")})).catch((function(e){alert("Please sign in or create an account to create your shelf"),console.error("error writing doc: ",e)})),g((function(t){return[].concat(Object(_.a)(t),[{title:e.title,author:e.author,thumbnail:e.book_image,description:e.description}])})))}))}(e)},children:f.some((function(t){return t.title===e.title&&t.author===e.author}))?Object(I.jsx)(G.b,{}):"add to shelf"})]},Object(P.a)())})):Object(I.jsx)(je.a,{type:"ThreeDots",color:"#00adb5",height:50,width:50,timeout:9e3})]}),function(e){var t=l[e];return t&&Object(I.jsxs)(R.a,{theme:i,style:q,isOpen:k,modalIndex:e,onRequestClose:function(){return U()},children:[Object(I.jsx)("img",{src:t.book_image,alt:t.title,width:"250"}),Object(I.jsx)("p",{children:t.description}),Object(I.jsx)("div",{children:Object(I.jsx)("button",{onClick:function(){return U()},children:"close"})})]})}(L),!t&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(be,{style:{marginBottom:-15},children:"Create an account to add books to your shelf"}),Object(I.jsx)(he,{children:Object(I.jsx)(x.b,{to:"/signup",children:"Sign up"})})]})]})},xe=n(55),me=n.n(xe);var fe=function(e){var t=e.user_UID,n=e.isLoggedIn,c=e.username,o=e.theme;q.content.background=o.background;var i=Object(r.useState)(!0),s=Object(u.a)(i,2),a=s[0],l=s[1],j=Object(r.useState)([]),d=Object(u.a)(j,2),b=d[0],h=d[1],m=Object(r.useState)(!1),f=Object(u.a)(m,2),g=f[0],v=f[1],y=Object(r.useState)(-1),k=Object(u.a)(y,2),w=k[0],S=k[1],C=Object(r.useState)(!1),L=Object(u.a)(C,2),E=L[0],U=L[1],D=!(!n||!b.length);function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;S(e),v((function(e){return!e}))}function F(e){e.preventDefault(),me.a.sendForm("service_tq89xn1","template_9ww6k7i",e.target,"user_UEiB9JmfoIUSh0FdsKFZE").then((function(e){alert("Success! Your email has been sent. Thanks for sharing"),console.log(e.text)}),(function(e){alert(e+"Could not send email. Double check the email address and try again.")})),U(!1),e.target.reset()}return Object(r.useEffect)((function(){O.collection("users/".concat(t,"/shelf")).onSnapshot((function(e){e.forEach((function(e){var t=e.data();h((function(e){return[].concat(Object(_.a)(e),[{title:t.title,thumbnail_URL:t.thumbnail,author:t.author,description:t.description}])}))}))}))}),[]),Object(r.useEffect)((function(){a&&setTimeout((function(){l(!1)}),1e3)}),[a]),Object(I.jsxs)(I.Fragment,{children:[n&&Object(I.jsxs)("div",{children:[Object(I.jsx)(B.a,{}),Object(I.jsx)(de,{children:"".concat(c)})]}),Object(I.jsx)("h1",{children:"My Shelf"}),Object(I.jsx)("div",{style:{margin:"0 auto",padding:30},children:Object(I.jsx)(p.b,{size:170})}),Object(I.jsx)("div",{children:D&&Object(I.jsx)("button",{onClick:function(){return U(!0)},children:"email shelf"})}),a?Object(I.jsx)(je.a,{type:"ThreeDots",color:"#00adb5",height:50,width:50}):Object(I.jsx)(Y,{children:b.length?b.map((function(e,c){return Object(I.jsxs)(N,{children:[Object(I.jsx)("img",{src:e.thumbnail_URL,alt:e.title,width:"128",height:"195"}),Object(I.jsx)("br",{}),Object(I.jsx)("button",{onClick:function(){return z(c)},children:Object(I.jsx)(W.a,{})}),n&&Object(I.jsx)("button",{onClick:function(){return function(e){if(window.confirm("Are you sure you want to delete ".concat(e.title," from your shelf?"))){l(!0);var n=O.collection("users").doc("".concat(t)).collection("shelf").doc("".concat(e.title));n.get().then((function(e){e.exists&&(n.delete().then((function(){return console.log("book deleted")})).catch((function(e){return console.error("could not delete book"+e)})),h(b.filter((function(e){return e.title===n}))))}))}}(e)},children:Object(I.jsx)(G.b,{})})]},Object(P.a)())})):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{style:{margin:"0 auto",paddingTop:40},children:[Object(I.jsx)("h4",{children:"Your shelf is empty. Search for books to add to your shelf"}),Object(I.jsx)("button",{style:{margin:30},children:Object(I.jsx)(x.b,{to:"/search",children:"Search"})})]}),Object(I.jsx)("br",{})]})}),Object(I.jsx)("div",{children:Object(I.jsx)(R.a,{theme:o,isOpen:E,onRequestClose:function(){return U(!1)},style:q,children:Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(ee,{className:"contact-form",onSubmit:F,children:[Object(I.jsx)("h4",{children:"Share your bookshelf"}),Object(I.jsx)("p",{children:" email this shelf to:"}),Object(I.jsx)("input",{type:"hidden",name:"username",value:String(c).endsWith("s")?"".concat(c,"'"):"".concat(c,"'s")}),Object(I.jsx)("input",{type:"hidden",name:"usernameSingular",value:c}),Object(I.jsx)("input",{type:"hidden",name:"user_UID",value:t}),Object(I.jsx)("input",{type:"hidden",name:"link",value:"https://alexanderolivares.github.io/Virtual-Bookshelf/#/ViewShelf/".concat(t)}),Object(I.jsx)(te,{type:"email",name:"email",placeholder:"name@email.com",required:!0}),Object(I.jsx)(oe,{type:"submit",children:"share shelf"}),Object(I.jsx)("div",{children:Object(I.jsx)("button",{style:{marginTop:15,borderRadius:5},onClick:function(){return U(!1)},children:"close"})})]})})})}),Object(I.jsx)("div",{children:function(e){var t=b[e];return t&&Object(I.jsxs)(R.a,{theme:o,style:q,isOpen:g,onRequestClose:function(){return z()},children:[Object(I.jsx)("button",{style:{position:"absolute",top:5,left:5,border:"none"},onClick:function(){return z()},children:Object(I.jsx)(G.a,{size:20})}),Object(I.jsx)("img",{width:"128",src:t.thumbnail_URL,alt:t.title}),Object(I.jsx)("p",{children:t.description}),Object(I.jsx)("p",{children:"by ".concat(t.author)}),Object(I.jsx)("div",{children:Object(I.jsx)("button",{onClick:function(){return z()},children:"close"})})]})}(w)})]})};var ge=function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn,c=e.username,o=e.theme;q.content.background=o.background;var i=Object(r.useState)({email:"",password:""}),s=Object(u.a)(i,2),a=s[0],l=s[1],j=Object(r.useState)(!1),d=Object(u.a)(j,2),O=d[0],x=d[1],m=Object(r.useState)(""),f=Object(u.a)(m,2),g=f[0],p=f[1],v=Object(r.useState)(Object(P.a)()),k=Object(u.a)(v,2),w=k[0],S=k[1];function C(e){var t=e.target,n=t.name,c=t.value;l((function(e){return Object(F.a)(Object(F.a)({},e),{},Object(Q.a)({},n,c))}))}function L(e){p(e.currentTarget.value)}function E(e){e.preventDefault();var t=g;b.sendPasswordResetEmail(t).then((function(){alert("check your email for reset instructions"),x(!1)})).catch((function(e){alert(e+"could not send reset password email. Double check your email address and try again."),console.error(e+"could not send reset password email")}))}return Object(I.jsx)("div",{children:t?Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(Oe,{isLoggedIn:t,username:c,theme:o})}):Object(I.jsxs)("div",{children:[Object(I.jsx)("h1",{children:"Sign in"}),Object(I.jsx)("div",{children:Object(I.jsx)(y.a,{size:100,style:{margin:30}})}),Object(I.jsxs)(ee,{onSubmit:function(e){e.preventDefault();var t=a.email,c=a.password;l({email:"",password:""}),S(Object(P.a)()),b.signInWithEmailAndPassword(t,c).then((function(){n(!0)})).catch((function(e){alert("".concat(e,". Could not sign in. Try again or reset your password.")),console.log("".concat(e.code," ").concat(e.message))}))},children:[Object(I.jsx)(te,{required:!0,name:"email",placeholder:"email",onChange:C}),Object(I.jsx)("br",{}),Object(I.jsx)(te,{required:!0,placeholder:"password",name:"password",type:"password",onChange:C}),Object(I.jsx)("br",{}),Object(I.jsx)(oe,{children:"sign in"}),Object(I.jsx)(ne,{children:"or"})]},w),Object(I.jsxs)(ce,{name:"googleSignIn",onClick:function(){b.signInWithPopup(h).then((function(){n(!0)})).catch((function(e){var t=e.code,c=e.message;n(null),alert("Could not signin: ".concat(t).concat(c))}))},children:[Object(I.jsx)($.a,{size:25})," Sign up with Google"]}),Object(I.jsx)("div",{children:Object(I.jsxs)("p",{children:["Forgot Your Password?",Object(I.jsx)("br",{}),Object(I.jsx)(oe,{onClick:function(){return x(!0)},children:"reset password"})]})}),Object(I.jsx)("div",{children:Object(I.jsx)(R.a,{theme:o,isOpen:O,onRequestClose:function(){return x(!1)},style:q,children:Object(I.jsxs)(ee,{onSubmit:E,children:[Object(I.jsx)("h3",{children:"Password Reset"}),Object(I.jsx)("p",{children:"An email with reset instructions will be sent to:"}),Object(I.jsx)("input",{style:{margin:20},onChange:L,placeholder:"yourname@email.com",type:"email",name:"email",required:!0}),Object(I.jsx)("br",{}),Object(I.jsx)("button",{type:"submit",style:{margin:5},children:"send email"}),Object(I.jsx)("button",{onClick:function(){return x(!1)},style:{margin:5},children:"cancel"})]})})})]})})};var pe=function(e){var t=e.theme;q.content.background=t.background;var n=Object(r.useState)(!0),c=Object(u.a)(n,2),o=c[0],i=c[1],s=Object(r.useState)([]),a=Object(u.a)(s,2),l=a[0],j=a[1],d=Object(r.useState)(!1),b=Object(u.a)(d,2),h=b[0],f=b[1],g=Object(r.useState)(-1),v=Object(u.a)(g,2),y=v[0],k=v[1],w=Object(r.useState)([]),S=Object(u.a)(w,2),C=S[0],L=S[1],E=Object(m.f)(),U=Object.values(E)[0];function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;k(e),f((function(e){return!e}))}return Object(r.useEffect)((function(){O.collection("users/".concat(U,"/shelf")).onSnapshot((function(e){e.forEach((function(e){var t=e.data();j((function(e){return[].concat(Object(_.a)(e),[{title:t.title,thumbnail_URL:t.thumbnail,author:t.author,description:t.description}])}))}))}))}),[]),Object(r.useEffect)((function(){O.collection("users/").onSnapshot((function(e){e.forEach((function(e){var t=e.data();if(t.uid===U){var n=t.username;n=String(n).endsWith("s")?"".concat(n,"'"):"".concat(n,"'s"),L(n)}}))}))}),[]),Object(r.useEffect)((function(){o&&setTimeout((function(){i(!1)}),2e3)}),[o]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("h1",{children:[C," Shelf"]}),Object(I.jsx)("div",{style:{margin:"0 auto",padding:30},children:Object(I.jsx)(p.b,{size:170})}),o?Object(I.jsx)(je.a,{type:"ThreeDots",color:"#00adb5",height:50,width:50}):Object(I.jsx)(Y,{children:l.length?l.map((function(e,t){return Object(I.jsxs)(N,{children:[Object(I.jsx)("img",{src:e.thumbnail_URL,alt:e.title,width:"128",height:"195"}),Object(I.jsx)("br",{}),Object(I.jsx)("button",{onClick:function(){return D(t)},children:Object(I.jsx)(W.a,{})})]},Object(P.a)())})):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{style:{margin:"0 auto",paddingTop:40},children:[Object(I.jsxs)("h4",{children:["sharer's"," shelf is empty."]}),Object(I.jsx)("button",{style:{margin:30},children:Object(I.jsx)(x.b,{to:"/search",children:"Search"})})]}),Object(I.jsx)("br",{})]})}),Object(I.jsx)("div",{children:function(e){var n=l[e];return n&&Object(I.jsxs)(R.a,{theme:t,style:q,isOpen:h,onRequestClose:function(){return D()},children:[Object(I.jsx)("button",{style:{position:"absolute",top:5,left:5,border:"none"},onClick:function(){return D()},children:Object(I.jsx)(G.a,{size:20})}),Object(I.jsx)("img",{width:"128",src:n.thumbnail_URL,alt:n.title}),Object(I.jsx)("p",{children:n.description}),Object(I.jsx)("p",{children:"by ".concat(n.author)}),Object(I.jsx)("div",{children:Object(I.jsx)("button",{onClick:function(){return D()},children:"close"})})]})}(y)})]})};var ve=function(){var e=Object(r.useState)(w),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),i=Object(u.a)(o,2),s=i[0],a=i[1],l=Object(r.useState)(null),j=Object(u.a)(l,2),d=j[0],h=j[1],g=Object(r.useState)(null),p=Object(u.a)(g,2),v=p[0],y=p[1],k=Object(r.useState)(null),S=Object(u.a)(k,2),C=S[0],L=S[1];return b.onAuthStateChanged((function(e){if(e){var t=O.collection("users").doc("".concat(e.uid));h(e.uid),y(!0),L(e.email),t.get().then((function(t){if(!t.exists)return console.log("New user: ".concat(e.displayName," was created")),a(e.displayName),O.collection("users").doc(e.uid).set({username:e.displayName,email:e.email,uid:e.uid});var n=t.data();a(e.displayName||n.username)})).catch((function(e){alert("".concat(e,". Could not sign in. Please try again.")),console.warn("Error getting document:",e)}))}else y(null)})),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(A,{theme:n}),Object(I.jsx)(f.a,{theme:n,children:Object(I.jsx)(x.a,{children:Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)(z,{theme:n,setTheme:c,username:s,setUsername:a,isLoggedIn:v,setIsLoggedIn:y,setUserEmail:L}),Object(I.jsx)("div",{className:"content",children:Object(I.jsxs)(m.c,{children:[Object(I.jsx)(m.a,{exact:!0,path:"/",children:Object(I.jsx)(Oe,{theme:n,username:s,user_UID:d,setIsLoggedIn:y,isLoggedIn:v})}),Object(I.jsx)(m.a,{exact:!0,path:"/search",children:Object(I.jsx)(H,{theme:n,user_UID:d,isLoggedIn:v,username:s})}),Object(I.jsx)(m.a,{exact:!0,path:"/signin",children:Object(I.jsx)(ge,{theme:n,username:s,setUsername:a,setIsLoggedIn:y,isLoggedIn:v})}),Object(I.jsx)(m.a,{exact:!0,path:"/signup",children:Object(I.jsx)(le,{theme:n,userEmail:C,username:s,setUsername:a,setIsLoggedIn:y,isLoggedIn:v,user_UID:d})}),Object(I.jsx)(m.a,{exact:!0,path:"/shelf/",children:Object(I.jsx)(fe,{theme:n,username:s,user_UID:d,isLoggedIn:v})}),Object(I.jsx)(m.a,{exact:!0,path:"/ViewShelf/:uid",children:Object(I.jsx)(pe,{theme:n,username:s,user_UID:d,isLoggedIn:v})})]})})]})})})]})},ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,105)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),i(e),r(e)}))};n(101);l.a.render(Object(I.jsx)(s.a.StrictMode,{children:Object(I.jsx)(ve,{})}),document.getElementById("root")),ye()},60:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.0419a7b5.chunk.js.map