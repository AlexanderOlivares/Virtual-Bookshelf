(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var c,o,i,r=n(3),s=n.n(r),a=n(40),l=n.n(a),u=(n(60),n(5)),j=n(36),d=(n(103),n(61),j.a.initializeApp({apiKey:"AIzaSyCf9iZTemnGhKa5eEi6wzFTbXk_cXmAHK4",authDomain:"booklist-305815.firebaseapp.com",projectId:"booklist-305815",storageBucket:"booklist-305815.appspot.com",messagingSenderId:"431504889946",appId:"1:431504889946:web:df1a1b10e369196c26a063",measurementId:"G-B2T1XPJ8CT"})),b=d.auth(),h=new j.a.auth.GoogleAuthProvider,O=j.a.firestore(),x=n(12),m=n(9),g=n(8),f=n(10),p=n(22),v=n(44),k=n(25),y={background:"#222831",color:"#eeeeee"},w={background:"#eeeeee",color:"#222831"},S=n(2),I=g.c.nav(c||(c=Object(f.a)(["\n  position: -webkit-sticky; /* Safari */\n  position: sticky;\n  top: 0;\n  font-size: 20px;\n  background-color: #00adb5;\n  padding: 15px;\n"]))),C=g.c.span(o||(o=Object(f.a)(["\n  padding: 10px;\n  margin: 10px;\n"]))),L=g.c.button(i||(i=Object(f.a)(["\n  border: none;\n  background-color: #eeeeee;\n  border: 2px solid #222831;\n  font-size: 14px;\n  margin-left: 5px;\n  padding: 5px;\n  border-radius: 5px;\n"])));var z,E,P,F=function(e){var t=e.theme,n=e.setTheme,c=e.setIsLoggedIn,o=e.isLoggedIn,i=e.setUsername,r=e.setUserEmail;return Object(S.jsxs)(I,{children:[Object(S.jsx)(C,{children:Object(S.jsx)(x.b,{to:"/",children:Object(S.jsx)(v.a,{})})}),Object(S.jsx)(C,{children:Object(S.jsx)(x.b,{to:"/shelf",children:Object(S.jsx)(p.b,{})})}),Object(S.jsx)(C,{onClick:function(){n(t===y?w:y)},children:t===w?Object(S.jsx)(k.b,{}):Object(S.jsx)(k.c,{})}),Object(S.jsx)(C,{children:Object(S.jsx)(x.b,{to:"/search",children:Object(S.jsx)(v.b,{})})}),o?Object(S.jsx)(L,{onClick:function(){b.signOut().then((function(){c(null),i(""),r(null)})).catch((function(e){console.log("Could not log out ".concat(e))}))},children:Object(S.jsx)(x.b,{to:"/",children:"Sign Out"})}):Object(S.jsx)(L,{children:Object(S.jsx)(x.b,{to:"/signin",children:"Sign in"})})]})},U=n(21),R=n(24),_=n(104),A=n(15),D=n.n(A),q=Object(g.b)(z||(z=Object(f.a)(["\n  html, body {\n    text-align: center;\n    background: ",";\n    color: ",'; \n    transition: all .3s ease;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    text-align: center;\n    width: 85%;\n    margin: 0 auto;\n    padding: 20px;\n    overflow-x: "hidden"; \n  }\n\n  a { \n    color: #1b262c;\n    text-decoration: none;\n  }\n\n  button {\n    border-radius: 5px;\n    font-size: 14px;\n    margin: 3px;\n    margin-top: 15px;\n    border: 2px solid #222831;\n    background-color: #eeeeee;\n  }\n\n'])),(function(e){return e.theme.background}),(function(e){return e.theme.color})),T={overlay:{position:"fixed",textAlign:"center",vertialAlign:"middle",height:"95%",backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",border:"1px solid #ccc",overflowX:"auto",WebkitOverflowScrolling:"touch",borderRadius:"5px",outline:"none",textAlign:"center"}},B=n(29),W=n(20),G=n(23),Y=g.c.div(E||(E=Object(f.a)(["\n  margin-top: 35px;\n  flex-grow: 1;\n"]))),N=g.c.div(P||(P=Object(f.a)(["\n  margin: 0 auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: stretch;\n  align-items: center;\n  padding: 5px;\n\n  @media (min-width: 900px) {\n    max-width: 65%;\n  }\n\n  @media (min-width: 2500px) {\n    max-width: 45%;\n  }\n"])));var V,K,Z,M,J,X,H=function(e){var t=e.user_UID,n=e.isLoggedIn,c=e.username,o=e.theme;T.content.background=o.background;var i=Object(r.useState)(""),s=Object(u.a)(i,2),a=s[0],l=s[1],j=Object(r.useState)([]),d=Object(u.a)(j,2),b=d[0],h=d[1],x=Object(r.useState)(Object(_.a)()),m=Object(u.a)(x,2),g=m[0],f=m[1],v=Object(r.useState)([]),k=Object(u.a)(v,2),y=k[0],w=k[1],I=Object(r.useState)(!1),C=Object(u.a)(I,2),L=C[0],z=C[1],E=Object(r.useState)(-1),P=Object(u.a)(E,2),F=P[0],A=P[1];function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;A(e),z((function(e){return!e}))}return Object(r.useEffect)((function(){O.collection("users/".concat(t,"/shelf")).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(R.a)({title:e.id},e.data())}));w(t)}))}),[]),Object(S.jsxs)("div",{children:[n&&Object(S.jsxs)("div",{children:[Object(S.jsx)(B.a,{}),Object(S.jsx)(de,{children:"".concat(c)})]}),Object(S.jsx)("h1",{children:"Search Books"}),!b.length&&Object(S.jsx)(p.a,{size:170,style:{margin:20}}),!n&&Object(S.jsx)("h4",{children:"Sign in or create an account to add books to your shelf"}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(a,"&key=").concat("AIzaSyAbYe2Z2WiZ0YeiDo8Ohqx4eG41ZY--nA4","&maxResults=40")).then((function(e){if(e.ok||console.log("fetch didn't work",e),e.ok)return console.log("fetch worked"),e.json()})).then((function(e){var t=e.items.filter((function(e){return e.volumeInfo.imageLinks&&e.volumeInfo.description}));h(t)})).catch((function(e){console.log("error: ",e)})),f(Object(_.a)())},children:[Object(S.jsx)("input",{value:a,onChange:function(e){l(e.currentTarget.value)}}),Object(S.jsx)("button",{style:{fontSize:16,margin:10},type:"submit",children:"search"})]},g),Object(S.jsx)(N,{children:b&&b.map((function(e,c){return Object(S.jsxs)(Y,{children:[Object(S.jsx)("img",{width:"128",height:"195",src:e.volumeInfo.imageLinks.thumbnail,alt:e.volumeInfo.title}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{onClick:function(){return q(c)},children:Object(S.jsx)(G.a,{})}),n&&Object(S.jsx)("button",{onClick:function(){return function(e){var n=O.collection("users").doc("".concat(t)).collection("shelf").doc("".concat(e.volumeInfo.title));n.get().then((function(t){t.exists?(n.delete().then((function(){return console.log("book deleted")})).catch((function(e){return console.error("could not delete book"+e)})),w(y.filter((function(e){return e.title!==n})))):(n.set({title:e.volumeInfo.title,author:e.volumeInfo.authors.join(", "),thumbnail:e.volumeInfo.imageLinks.thumbnail,description:e.volumeInfo.description}).then((function(){console.log("book successfully saved")})).catch((function(e){alert("Please sign in or create an account to add books to your shelf"),console.error("error writing doc: ",e)})),w((function(t){return[].concat(Object(U.a)(t),[{title:e.volumeInfo.title,author:e.volumeInfo.authors,thumbnail:e.volumeInfo.imageLinks.thumbnail,description:e.volumeInfo.description}])})))}))}(e)},children:y.some((function(t){return t.title===e.volumeInfo.title&&t.thumbnail===e.volumeInfo.imageLinks.thumbnail}))?Object(S.jsx)(W.b,{}):"add to shelf"})]},Object(_.a)())}))}),function(e){var t=b[e];return t&&Object(S.jsxs)(D.a,{theme:o,style:T,isOpen:L,modalIndex:e,onRequestClose:function(){return q()},children:[Object(S.jsx)("button",{style:{position:"absolute",top:5,left:5,border:"none"},onClick:function(){return q()},children:Object(S.jsx)(W.a,{size:20})}),Object(S.jsx)("div",{children:Object(S.jsx)("img",{src:t.volumeInfo.imageLinks.thumbnail,alt:t.volumeInfo.title})}),Object(S.jsxs)("div",{children:[Object(S.jsx)("p",{children:t.volumeInfo.description}),Object(S.jsx)("p",{children:"by ".concat(t.volumeInfo.authors)})]}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{onClick:function(){return q()},children:"close"})})]})}(F)]})},Q=n(28),$=n(30),ee=g.c.form(V||(V=Object(f.a)(["\n  margin: 0 auto;\n  width: 85%;\n  max-width: 1400px;\n  display: block;\n  padding: 5px;\n"]))),te=g.c.input(K||(K=Object(f.a)(["\n  width: 75%;\n  border-radius: 5px;\n  font-size: 16px;\n  padding: 5px;\n  margin: 5px;\n"]))),ne=g.c.p(Z||(Z=Object(f.a)(["\n  font-size: 12px;\n  margin: 10px;\n"]))),ce=g.c.button(M||(M=Object(f.a)(["\n  height: 2.5em;\n  border-radius: 5px;\n  background-color: #d84b37;\n  font-size: 18px;\n  margin: 10px;\n"]))),oe=g.c.button(J||(J=Object(f.a)(["\n  height: 2em;\n  border-radius: 5px;\n  font-size: 16px;\n  border-radius: 5px;\n  margin: 20px;\n  background-color: #00adb5;\n"]))),ie=g.c.div(X||(X=Object(f.a)(["\n  margin: 0 auto;\n  width: 85%;\n  max-width: 1400px;\n  display: block;\n  padding: 5px;\n  text-align: center;\n"])));var re,se,ae,le=function(e){var t=e.username,n=e.isLoggedIn,c=e.theme;T.content.background=c.background;var o=Object(r.useState)(!1),i=Object(u.a)(o,2),s=i[0],a=i[1],l=Object(r.useState)(""),j=Object(u.a)(l,2),d=j[0],m=j[1],g=Object(r.useState)({username:"",email:"",password:"",confirmPassword:""}),f=Object(u.a)(g,2),p=f[0],v=f[1],k=Object(r.useState)(Object(_.a)()),y=Object(u.a)(k,2),w=y[0],I=y[1];function C(e){var t=e.target,n=t.name,c=t.value;v((function(e){return Object(R.a)(Object(R.a)({},e),{},Object(Q.a)({},n,c))}))}function L(e){m(e.currentTarget.value)}function z(e){e.preventDefault();var t=d;b.sendPasswordResetEmail(t).then((function(){alert("check your email for reset instructions"),console.log("check your email for reset instructions"),a(!1)})).catch((function(e){alert(e+"could not send reset password email"),console.error(e+"could not send reset password email")}))}return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("div",{children:n?Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(H,{username:t,theme:c})}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h3",{children:"Create Your Account"}),Object(S.jsx)(ie,{children:Object(S.jsxs)(ce,{name:"googleSignIn",onClick:function(){b.signInWithPopup(h).then((function(e){return O.collection("users").doc(e.user.uid).set({username:e.user.displayName,email:e.user.email,uid:e.user.uid})})).catch((function(e){var t=e.code,n=e.message;alert("Could not signup: ".concat(t,". ").concat(n))}))},children:[Object(S.jsx)($.a,{size:25})," Sign up with Google"]})}),Object(S.jsxs)(ee,{onSubmit:function(e){e.preventDefault();var t=p.username,n=p.email,c=p.password,o=p.confirmPassword;/^.{6,25}$/g.test(c)?c===o?(v({username:"",email:"",password:""}),I(Object(_.a)()),b.createUserWithEmailAndPassword(n,c).then((function(e){return O.collection("users").doc(e.user.uid).set({username:t,email:n,uid:e.user.uid})})).catch((function(e){alert("Error. Could not create account. Please Try again. ".concat(e.code))}))):alert("passwords do not match"):alert("password must be between 6 and 25 characters long")},children:[Object(S.jsx)("h4",{children:"Register"}),Object(S.jsx)(te,{required:!0,maxLength:"75",name:"username",placeholder:"pick a username",onChange:C}),Object(S.jsx)("br",{}),Object(S.jsx)(te,{type:"email",required:!0,minLength:"6",maxLength:"75",name:"email",placeholder:"your email",onChange:C}),Object(S.jsx)("br",{}),Object(S.jsx)("br",{}),Object(S.jsx)(te,{required:!0,placeholder:"create a password",name:"password",type:"password",onChange:C}),Object(S.jsx)(te,{required:!0,placeholder:"confirm your password",name:"confirmPassword",type:"password",onChange:C}),Object(S.jsx)(ne,{children:"Password must be at least 6 characters long"}),Object(S.jsx)(oe,{type:"submit",children:"create my account"}),Object(S.jsx)("hr",{}),Object(S.jsx)("div",{children:Object(S.jsxs)("p",{children:["Already have an account?",Object(S.jsx)("br",{}),Object(S.jsx)(oe,{children:Object(S.jsx)(x.b,{to:"/signin",children:"sign in"})})]})})]},w),Object(S.jsx)(ie,{children:Object(S.jsxs)("p",{children:["Forgot Your Password?",Object(S.jsx)("br",{}),Object(S.jsx)(oe,{onClick:function(){return a(!0)},children:"reset password"})]})})]})}),Object(S.jsx)("div",{children:Object(S.jsx)(D.a,{theme:c,isOpen:s,onRequestClose:function(){return a(!1)},style:T,children:Object(S.jsxs)(ee,{onSubmit:z,children:[Object(S.jsx)("h3",{children:"Password Reset"}),Object(S.jsx)("p",{children:"An email with reset instructions will be sent to:"}),Object(S.jsx)("input",{style:{margin:20},onChange:L,placeholder:"yourname@email.com",type:"email",name:"email",required:!0}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{type:"submit",style:{margin:5},children:"send email"}),Object(S.jsx)("button",{onClick:function(){return a(!1)},style:{margin:5},children:"cancel"})]})})})]})},ue=n(54),je=n.n(ue);D.a.setAppElement("#root");var de=g.c.p(re||(re=Object(f.a)(["\n  font-size: 18px;\n  display: inline;\n  padding: 10px;\n"]))),be=g.c.p(se||(se=Object(f.a)(["\n  margin: 0 auto;\n  max-width: 75%;\n  padding: 20px;\n"]))),he=g.c.button(ae||(ae=Object(f.a)(["\n  display: inline;\n  margin: 20px;\n  padding: 5px;\n"])));var Oe=function(e){var t=e.isLoggedIn,n=e.username,c=e.user_UID,o=e.theme;T.content.background=o.background;var i=Object(r.useState)([]),s=Object(u.a)(i,2),a=s[0],l=s[1],j=Object(r.useState)([]),d=Object(u.a)(j,2),m=d[0],g=d[1],f=Object(r.useState)(!1),p=Object(u.a)(f,2),v=p[0],y=p[1],w=Object(r.useState)(-1),I=Object(u.a)(w,2),C=I[0],L=I[1];function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;L(e),y((function(e){return!e}))}return Object(r.useEffect)((function(){O.collection("users/".concat(c,"/shelf")).onSnapshot((function(e){e.forEach((function(e){var t=e.data();g((function(e){return[].concat(Object(U.a)(e),[{title:t.title,thumbnail_URL:t.thumbnail,author:t.author,description:t.description}])}))}))}))}),[]),Object(r.useEffect)((function(){fetch("https://api.nytimes.com/svc/books/v3/lists/current/hardcover-nonfiction.json?api-key=".concat("ZBNkKwVoxAnqdKFd3GyMy5QVkohGhdnD")).then((function(e){if(e.ok)return e.json()})).then((function(e){l(e.results.books)})).catch((function(e){return console.error("error: ".concat(e))}))}),[]),Object(S.jsxs)("div",{children:[t?Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{children:[Object(S.jsx)(B.a,{}),Object(S.jsx)(de,{children:"".concat(n)})]}),Object(S.jsx)(he,{children:Object(S.jsx)(x.b,{to:"/shelf",children:"go to my shelf"})}),Object(S.jsx)(he,{children:Object(S.jsx)(x.b,{to:"/search",children:"search all books"})})]}):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)("h1",{children:"My Virtual Bookshelf"}),Object(S.jsx)(k.a,{size:140}),Object(S.jsxs)(be,{children:["Miss the feeling of putting hardcovers and paperbacks on your bookshelf? If you listen to audiobooks or read e-books now you can visualize your collection with Virtual Bookshelf. Create an account, search for books to add to your shelf and show your friends what you've been reading!",Object(S.jsx)("br",{})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("h5",{children:"Create an Account or sign up with Google"}),Object(S.jsx)(ce,{style:{backgroundColor:"#00adb5"},children:Object(S.jsx)(x.b,{to:"/signup",children:"Sign up"})}),Object(S.jsxs)(ce,{name:"googleSignIn",onClick:function(){b.signInWithPopup(h).then((function(e){return O.collection("users").doc(e.user.uid).set({username:e.user.displayName,email:e.user.email,uid:e.user.uid})})).catch((function(e){var t=e.code,n=e.message;alert("Error could not sign in. Please Try again."),console.warn("".concat(t,". ").concat(n))}))},children:[Object(S.jsx)($.a,{size:25})," Sign up with Google"]})]})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("h3",{children:"What have you read lately?"}),Object(S.jsx)("h5",{style:{textDecoration:"underline"},children:"NYT Best Sellers"}),a.length?a.map((function(e,n){return Object(S.jsxs)(Y,{children:[Object(S.jsx)("img",{style:{maxWidth:"100%"},src:e.book_image,alt:e.title}),Object(S.jsx)("div",{children:e.title}),Object(S.jsx)("div",{children:e.contributor}),Object(S.jsxs)("div",{children:["Rank: ",e.rank]}),Object(S.jsx)("button",{onClick:function(){return z(n)},children:Object(S.jsx)(G.a,{size:16})}),t&&Object(S.jsx)("button",{onClick:function(){return function(e){var t=O.collection("users").doc("".concat(c)).collection("shelf").doc("".concat(e.title));t.get().then((function(n){n.exists?(t.delete().then((function(){return console.log("book deleted")})).catch((function(e){return alert("could not delete book"+e)})),g(m.filter((function(t){return t.title!==e.title})))):(t.set({title:e.title,author:e.author,thumbnail:e.book_image,description:e.description}).then((function(){console.log("doc successfully written")})).catch((function(e){alert("Please sign in or create an account to create your shelf"),console.error("error writing doc: ",e)})),g((function(t){return[].concat(Object(U.a)(t),[{title:e.title,author:e.author,thumbnail:e.book_image,description:e.description}])})))}))}(e)},children:m.some((function(t){return t.title===e.title&&t.author===e.author}))?Object(S.jsx)(W.b,{}):"add to shelf"})]},Object(_.a)())})):Object(S.jsx)(je.a,{type:"ThreeDots",color:"#00adb5",height:50,width:50,timeout:9e3})]}),function(e){var t=a[e];return t&&Object(S.jsxs)(D.a,{theme:o,style:T,isOpen:v,modalIndex:e,onRequestClose:function(){return z()},children:[Object(S.jsx)("img",{src:t.book_image,alt:t.title,width:"250"}),Object(S.jsx)("p",{children:t.description}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{onClick:function(){return z()},children:"close"})})]})}(C),!t&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(be,{style:{marginBottom:-15},children:"Create an account to add books to your shelf"}),Object(S.jsx)(he,{children:Object(S.jsx)(x.b,{to:"/signup",children:"Sign up"})})]})]})},xe=n(55),me=n.n(xe);var ge=function(e){var t=e.user_UID,n=e.isLoggedIn,c=e.username,o=e.theme;T.content.background=o.background;var i=Object(r.useState)([]),s=Object(u.a)(i,2),a=s[0],l=s[1],j=Object(r.useState)(!1),d=Object(u.a)(j,2),b=d[0],h=d[1],m=Object(r.useState)(-1),g=Object(u.a)(m,2),f=g[0],v=g[1],k=Object(r.useState)(!1),y=Object(u.a)(k,2),w=y[0],I=y[1],C=!(!n||!a.length);function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;v(e),h((function(e){return!e}))}function z(e){e.preventDefault(),me.a.sendForm("service_tq89xn1","template_9ww6k7i",e.target,"user_UEiB9JmfoIUSh0FdsKFZE").then((function(e){alert("Success! Your email has been sent. Thanks for sharing"),console.log(e.text)}),(function(e){alert(e+"Could not send email. Double check the email address and try again."),console.log(e.text)})),I(!1),e.target.reset()}return Object(r.useEffect)((function(){O.collection("users/".concat(t,"/shelf")).onSnapshot((function(e){e.forEach((function(e){var t=e.data();l((function(e){return[].concat(Object(U.a)(e),[{title:t.title,thumbnail_URL:t.thumbnail,author:t.author,description:t.description}])}))}))}))}),[]),Object(S.jsxs)(S.Fragment,{children:[n&&Object(S.jsxs)("div",{children:[Object(S.jsx)(B.a,{}),Object(S.jsx)(de,{children:"".concat(c)})]}),Object(S.jsx)("h1",{children:"My Shelf"}),Object(S.jsx)("div",{style:{margin:"0 auto",padding:30},children:Object(S.jsx)(p.b,{size:170})}),Object(S.jsx)("div",{children:C&&Object(S.jsx)("button",{onClick:function(){return I(!0)},children:"email shelf"})}),Object(S.jsx)(N,{children:a.length?a.map((function(e,c){return Object(S.jsxs)(Y,{children:[Object(S.jsx)("img",{src:e.thumbnail_URL,alt:e.title,width:"128",height:"195"}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{onClick:function(){return L(c)},children:Object(S.jsx)(G.a,{})}),n&&Object(S.jsx)("button",{onClick:function(){return function(e){if(window.confirm("Are you sure you want to delete this book from your shelf?")){var n=O.collection("users").doc("".concat(t)).collection("shelf").doc("".concat(e.title));n.get().then((function(e){e.exists&&(n.delete().then((function(){return console.log("book deleted")})).catch((function(e){return console.error("could not delete book"+e)})),l(a.filter((function(e){return e.title===n}))))}))}}(e)},children:Object(S.jsx)(W.b,{})})]},Object(_.a)())})):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{style:{margin:"0 auto",paddingTop:40},children:[Object(S.jsx)("h4",{children:"Your shelf is empty. Search for books to add to your shelf"}),Object(S.jsx)("button",{style:{margin:30},children:Object(S.jsx)(x.b,{to:"/search",children:"Search"})})]}),Object(S.jsx)("br",{})]})}),Object(S.jsx)("div",{children:Object(S.jsx)(D.a,{theme:o,isOpen:w,onRequestClose:function(){return I(!1)},style:T,children:Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)(ee,{className:"contact-form",onSubmit:z,children:[Object(S.jsx)("h4",{children:"Share your bookshelf"}),Object(S.jsx)("p",{children:" email this shelf to:"}),Object(S.jsx)("input",{type:"hidden",name:"username",value:String(c).endsWith("s")?"".concat(c,"'"):"".concat(c,"'s")}),Object(S.jsx)("input",{type:"hidden",name:"usernameSingular",value:c}),Object(S.jsx)("input",{type:"hidden",name:"user_UID",value:t}),Object(S.jsx)("input",{type:"hidden",name:"link",value:"https://alexanderolivares.github.io/Virtual-Bookshelf/#/ViewShelf/".concat(t)}),Object(S.jsx)(te,{type:"email",name:"email",placeholder:"name@email.com",required:!0}),Object(S.jsx)(oe,{type:"submit",children:"share shelf"}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{style:{marginTop:15,borderRadius:5},onClick:function(){return I(!1)},children:"close"})})]})})})}),Object(S.jsx)("div",{children:function(e){var t=a[e];return t&&Object(S.jsxs)(D.a,{theme:o,style:T,isOpen:b,onRequestClose:function(){return L()},children:[Object(S.jsx)("button",{style:{position:"absolute",top:5,left:5,border:"none"},onClick:function(){return L()},children:Object(S.jsx)(W.a,{size:20})}),Object(S.jsx)("img",{width:"128",src:t.thumbnail_URL,alt:t.title}),Object(S.jsx)("p",{children:t.description}),Object(S.jsx)("p",{children:"by ".concat(t.author)}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{onClick:function(){return L()},children:"close"})})]})}(f)})]})};var fe=function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn,c=e.username,o=e.theme;T.content.background=o.background;var i=Object(r.useState)({email:"",password:""}),s=Object(u.a)(i,2),a=s[0],l=s[1],j=Object(r.useState)(!1),d=Object(u.a)(j,2),O=d[0],x=d[1],m=Object(r.useState)(""),g=Object(u.a)(m,2),f=g[0],p=g[1],v=Object(r.useState)(Object(_.a)()),y=Object(u.a)(v,2),w=y[0],I=y[1];function C(e){var t=e.target,n=t.name,c=t.value;l((function(e){return Object(R.a)(Object(R.a)({},e),{},Object(Q.a)({},n,c))}))}function L(e){p(e.currentTarget.value)}function z(e){e.preventDefault();var t=f;b.sendPasswordResetEmail(t).then((function(){alert("check your email for reset instructions"),x(!1)})).catch((function(e){alert(e+"could not send reset password email. Double check your email address and try again."),console.error(e+"could not send reset password email")}))}return Object(S.jsx)("div",{children:t?Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(Oe,{isLoggedIn:t,username:c,theme:o})}):Object(S.jsxs)("div",{children:[Object(S.jsx)("h1",{children:"Sign in"}),Object(S.jsx)("div",{children:Object(S.jsx)(k.a,{size:100,style:{margin:30}})}),Object(S.jsxs)(ee,{onSubmit:function(e){e.preventDefault();var t=a.email,c=a.password;l({email:"",password:""}),I(Object(_.a)()),b.signInWithEmailAndPassword(t,c).then((function(){n(!0)})).catch((function(e){alert("".concat(e,". Could not sign in. Try again or reset your passowrd.")),console.log(e.code),console.log(e.message)}))},children:[Object(S.jsx)(te,{required:!0,name:"email",placeholder:"email",onChange:C}),Object(S.jsx)("br",{}),Object(S.jsx)(te,{required:!0,placeholder:"password",name:"password",type:"password",onChange:C}),Object(S.jsx)("br",{}),Object(S.jsx)(oe,{children:"sign in"}),Object(S.jsx)(ne,{children:"or"})]},w),Object(S.jsxs)(ce,{name:"googleSignIn",onClick:function(){b.signInWithPopup(h).then((function(){n(!0)})).catch((function(e){var t=e.code,c=e.message;n(null),alert("".concat(t).concat(c))}))},children:[Object(S.jsx)($.a,{size:25})," Sign up with Google"]}),Object(S.jsx)("div",{children:Object(S.jsxs)("p",{children:["Forgot Your Password?",Object(S.jsx)("br",{}),Object(S.jsx)(oe,{onClick:function(){return x(!0)},children:"reset password"})]})}),Object(S.jsx)("div",{children:Object(S.jsx)(D.a,{theme:o,isOpen:O,onRequestClose:function(){return x(!1)},style:T,children:Object(S.jsxs)(ee,{onSubmit:z,children:[Object(S.jsx)("h3",{children:"Password Reset"}),Object(S.jsx)("p",{children:"An email with reset instructions will be sent to:"}),Object(S.jsx)("input",{style:{margin:20},onChange:L,placeholder:"yourname@email.com",type:"email",name:"email",required:!0}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{type:"submit",style:{margin:5},children:"send email"}),Object(S.jsx)("button",{onClick:function(){return x(!1)},style:{margin:5},children:"cancel"})]})})})]})})};var pe=function(e){var t=e.theme;T.content.background=t.background;var n=Object(r.useState)([]),c=Object(u.a)(n,2),o=c[0],i=c[1],s=Object(r.useState)(!1),a=Object(u.a)(s,2),l=a[0],j=a[1],d=Object(r.useState)(-1),b=Object(u.a)(d,2),h=b[0],g=b[1],f=Object(r.useState)([]),v=Object(u.a)(f,2),k=v[0],y=v[1],w=Object(m.f)(),I=Object.values(w)[0];function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;g(e),j((function(e){return!e}))}return Object(r.useEffect)((function(){O.collection("users/".concat(I,"/shelf")).onSnapshot((function(e){e.forEach((function(e){var t=e.data();i((function(e){return[].concat(Object(U.a)(e),[{title:t.title,thumbnail_URL:t.thumbnail,author:t.author,description:t.description}])}))}))}))}),[]),Object(r.useEffect)((function(){O.collection("users/").onSnapshot((function(e){e.forEach((function(e){var t=e.data();if(t.uid===I){var n=t.username;n=String(n).endsWith("s")?"".concat(n,"'"):"".concat(n,"'s"),y(n)}}))}))}),[]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("h1",{children:[k," Shelf"]}),Object(S.jsx)("div",{style:{margin:"0 auto",padding:30},children:Object(S.jsx)(p.b,{size:170})}),Object(S.jsx)(N,{children:o.length?o.map((function(e,t){return Object(S.jsxs)(Y,{children:[Object(S.jsx)("img",{src:e.thumbnail_URL,alt:e.title,width:"128",height:"195"}),Object(S.jsx)("br",{}),Object(S.jsx)("button",{onClick:function(){return C(t)},children:Object(S.jsx)(G.a,{})})]},Object(_.a)())})):Object(S.jsxs)(S.Fragment,{children:[Object(S.jsxs)("div",{style:{margin:"0 auto",paddingTop:40},children:[Object(S.jsxs)("h4",{children:["sharer's"," shelf is empty."]}),Object(S.jsx)("button",{style:{margin:30},children:Object(S.jsx)(x.b,{to:"/search",children:"Search"})})]}),Object(S.jsx)("br",{})]})}),Object(S.jsx)("div",{children:function(e){var n=o[e];return n&&Object(S.jsxs)(D.a,{theme:t,style:T,isOpen:l,onRequestClose:function(){return C()},children:[Object(S.jsx)("button",{style:{position:"absolute",top:5,left:5,border:"none"},onClick:function(){return C()},children:Object(S.jsx)(W.a,{size:20})}),Object(S.jsx)("img",{width:"128",src:n.thumbnail_URL,alt:n.title}),Object(S.jsx)("p",{children:n.description}),Object(S.jsx)("p",{children:"by ".concat(n.author)}),Object(S.jsx)("div",{children:Object(S.jsx)("button",{onClick:function(){return C()},children:"close"})})]})}(h)})]})};var ve=function(){var e=Object(r.useState)(w),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),i=Object(u.a)(o,2),s=i[0],a=i[1],l=Object(r.useState)(null),j=Object(u.a)(l,2),d=j[0],h=j[1],f=Object(r.useState)(null),p=Object(u.a)(f,2),v=p[0],k=p[1],y=Object(r.useState)(null),I=Object(u.a)(y,2),C=I[0],L=I[1];return b.onAuthStateChanged((function(e){e?O.collection("users").doc("".concat(e.uid)).get().then((function(t){if(t.exists){var n=t.data();a(e.displayName||n.username),h(e.uid),k(!0),L(e.email),console.log(e.uid+"is signed in")}else alert("Error logging in. Please try again")})).catch((function(e){alert("".concat(e,". Could not sign in. Please try again.")),console.log("Error getting document:",e)})):k(null)})),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(q,{theme:n}),Object(S.jsx)(g.a,{theme:n,children:Object(S.jsx)(x.a,{children:Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(F,{theme:n,setTheme:c,username:s,setUsername:a,isLoggedIn:v,setIsLoggedIn:k,setUserEmail:L}),Object(S.jsx)("div",{className:"content",children:Object(S.jsxs)(m.c,{children:[Object(S.jsx)(m.a,{exact:!0,path:"/",children:Object(S.jsx)(Oe,{theme:n,username:s,user_UID:d,isLoggedIn:v})}),Object(S.jsx)(m.a,{exact:!0,path:"/search",children:Object(S.jsx)(H,{theme:n,user_UID:d,isLoggedIn:v,username:s})}),Object(S.jsx)(m.a,{exact:!0,path:"/signin",children:Object(S.jsx)(fe,{theme:n,username:s,setUsername:a,setIsLoggedIn:k,isLoggedIn:v})}),Object(S.jsx)(m.a,{exact:!0,path:"/signup",children:Object(S.jsx)(le,{theme:n,userEmail:C,username:s,setUsername:a,setIsLoggedIn:k,isLoggedIn:v})}),Object(S.jsx)(m.a,{exact:!0,path:"/shelf/",children:Object(S.jsx)(ge,{theme:n,username:s,user_UID:d,isLoggedIn:v})}),Object(S.jsx)(m.a,{exact:!0,path:"/ViewShelf/:uid",children:Object(S.jsx)(pe,{theme:n,username:s,user_UID:d,isLoggedIn:v})})]})})]})})})]})},ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,105)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),i(e),r(e)}))};n(101);l.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(ve,{})}),document.getElementById("root")),ke()},60:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.b12fc897.chunk.js.map