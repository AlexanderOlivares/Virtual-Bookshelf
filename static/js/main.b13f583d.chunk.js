(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,n){"use strict";n.r(t);var c,o,i,r=n(3),s=n.n(r),a=n(41),l=n.n(a),u=(n(61),n(5)),j=n(37),d=(n(104),n(62),j.a.initializeApp({apiKey:"AIzaSyCf9iZTemnGhKa5eEi6wzFTbXk_cXmAHK4",authDomain:"booklist-305815.firebaseapp.com",projectId:"booklist-305815",storageBucket:"booklist-305815.appspot.com",messagingSenderId:"431504889946",appId:"1:431504889946:web:df1a1b10e369196c26a063",measurementId:"G-B2T1XPJ8CT"})),b=d.auth(),h=new j.a.auth.GoogleAuthProvider,O=j.a.firestore(),x=n(12),m=n(9),g=n(8),f=n(10),p={background:"#222831",color:"#eeeeee"},v={background:"#eeeeee",color:"#222831"},y=n(20),k=n(36),w=n(2),S=g.c.nav(c||(c=Object(f.a)(["\n  position: -webkit-sticky; /* Safari */\n  position: sticky;\n  top: 0;\n  font-size: 20px;\n  background-color: #00adb5;\n  padding: 15px;\n"]))),I=g.c.span(o||(o=Object(f.a)(["\n  padding: 10px;\n  margin: 10px;\n"]))),C=g.c.button(i||(i=Object(f.a)(["\n  border: none;\n  background-color: #eeeeee;\n  border: 2px solid #222831;\n  font-size: 14px;\n  margin-left: 5px;\n  padding: 5px;\n  border-radius: 5px;\n"])));var L,z,E,U=function(e){var t=e.theme,n=e.setTheme,c=e.setIsLoggedIn,o=e.isLoggedIn,i=e.setUsername,r=e.setUserEmail;return Object(w.jsxs)(S,{children:[Object(w.jsx)(I,{children:Object(w.jsx)(x.b,{to:"/",children:Object(w.jsx)(y.b,{size:25})})}),Object(w.jsx)(I,{children:Object(w.jsx)(x.b,{to:"/shelf",children:Object(w.jsx)(y.a,{size:30})})}),Object(w.jsx)(I,{onClick:function(){n(t===p?v:p)},children:t===v?Object(w.jsx)(k.a,{size:25}):Object(w.jsx)(k.b,{size:25})}),Object(w.jsx)(I,{children:Object(w.jsx)(x.b,{to:"/search",children:Object(w.jsx)(y.c,{size:20})})}),o?Object(w.jsx)(C,{onClick:function(){b.signOut().then((function(){c(null),i(""),r(null)})).catch((function(e){console.log("Could not log out ".concat(e))}))},children:Object(w.jsx)(x.b,{to:"/",children:"Sign Out"})}):Object(w.jsx)(C,{children:Object(w.jsx)(x.b,{to:"/signin",children:"Sign in"})})]})},D=n(23),_=n(24),T=n(105),F=n(15),P=n.n(F),R=Object(g.b)(L||(L=Object(f.a)(["\n  html, body {\n    text-align: center;\n    background: ",";\n    color: ",'; \n    transition: all .3s ease;\n  }\n\n  h1, h2, h3, h4, h5, h6 {\n    text-align: center;\n    width: 85%;\n    margin: 0 auto;\n    padding: 20px;\n    overflow-x: "hidden"; \n  }\n\n  a { \n    color: #1b262c;\n    text-decoration: none;\n  }\n\n  button {\n    border-radius: 5px;\n    font-size: 14px;\n    margin: 3px;\n    margin-top: 15px;\n    border: 2px solid #222831;\n    background-color: #eeeeee;\n  }\n\n'])),(function(e){return e.theme.background}),(function(e){return e.theme.color})),A={overlay:{position:"fixed",textAlign:"center",vertialAlign:"middle",height:"95%",backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",border:"1px solid #ccc",overflowX:"auto",WebkitOverflowScrolling:"touch",borderRadius:"5px",outline:"none",textAlign:"center"}},q=n(28),B=n(22),G=n(21),W=g.c.div(z||(z=Object(f.a)(["\n  margin-top: 35px;\n  flex-grow: 1;\n"]))),N=g.c.div(E||(E=Object(f.a)(["\n  margin: 0 auto;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: stretch;\n  align-items: center;\n  padding: 5px;\n\n  @media (min-width: 900px) {\n    max-width: 65%;\n  }\n\n  @media (min-width: 2500px) {\n    max-width: 45%;\n  }\n"])));var Y,V,K,Z,J,M,X=function(e){var t=e.user_UID,n=e.isLoggedIn,c=e.username,o=e.theme;A.content.background=o.background;var i=Object(r.useState)(""),s=Object(u.a)(i,2),a=s[0],l=s[1],j=Object(r.useState)([]),d=Object(u.a)(j,2),b=d[0],h=d[1],x=Object(r.useState)(Object(T.a)()),m=Object(u.a)(x,2),g=m[0],f=m[1],p=Object(r.useState)([]),v=Object(u.a)(p,2),k=v[0],S=v[1],I=Object(r.useState)(!1),C=Object(u.a)(I,2),L=C[0],z=C[1],E=Object(r.useState)(-1),U=Object(u.a)(E,2),F=U[0],R=U[1];function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;R(e),z((function(e){return!e}))}return Object(r.useEffect)((function(){O.collection("users/".concat(t,"/shelf")).onSnapshot((function(e){var t=e.docs.map((function(e){return Object(_.a)({title:e.id},e.data())}));S(t)}))}),[]),Object(w.jsxs)("div",{children:[n&&Object(w.jsxs)("div",{children:[Object(w.jsx)(q.a,{}),Object(w.jsx)(je,{children:"".concat(c)})]}),Object(w.jsx)("h1",{children:"Search Books"}),!b.length&&Object(w.jsx)(y.c,{size:170,style:{margin:20}}),!n&&Object(w.jsx)("h4",{children:"Search by title or author. Sign in or create an account to add books to your shelf."}),Object(w.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(a),a.length?(fetch("https://www.googleapis.com/books/v1/volumes?q=".concat(a,"&key=").concat("AIzaSyAbYe2Z2WiZ0YeiDo8Ohqx4eG41ZY--nA4","&maxResults=40")).then((function(e){if(e.ok||alert("Error getting books from Google Books"+e),e.ok)return e.json()})).then((function(e){var t=e.items.filter((function(e){return e.volumeInfo.imageLinks&&e.volumeInfo.description&&e.volumeInfo.authors}));h(t)})).catch((function(e){alert("Error coult not fetch books ".concat(e))})),f(Object(T.a)())):alert("Your search box is empty. Type a book title or author to do a search.")},children:[Object(w.jsx)("input",{value:a,onChange:function(e){l(e.currentTarget.value)}}),Object(w.jsx)("button",{style:{fontSize:16,margin:10},type:"submit",children:"search"})]},g),Object(w.jsx)(N,{children:b&&b.map((function(e,c){return Object(w.jsxs)(W,{children:[Object(w.jsx)("img",{width:"128",height:"195",src:e.volumeInfo.imageLinks.thumbnail,alt:e.volumeInfo.title}),Object(w.jsx)("br",{}),Object(w.jsx)("button",{onClick:function(){return Y(c)},children:Object(w.jsx)(G.b,{})}),n&&Object(w.jsx)("button",{onClick:function(){return function(e){var n=O.collection("users").doc("".concat(t)).collection("shelf").doc("".concat(e.volumeInfo.title));n.get().then((function(t){t.exists?(n.delete().then((function(){return console.log("book deleted")})).catch((function(e){return console.error("could not delete book"+e)})),S(k.filter((function(t){return t.title!==e.volumeInfo.title&&t.description!==e.volumeInfo.description})))):(n.set({title:e.volumeInfo.title,author:e.volumeInfo.authors.join(", "),thumbnail:e.volumeInfo.imageLinks.thumbnail,description:e.volumeInfo.description}).then((function(){console.log("book successfully saved")})).catch((function(e){alert("Please sign in or create an account to add books to your shelf"),console.error("error writing doc: ",e)})),S((function(t){return[].concat(Object(D.a)(t),[{title:e.volumeInfo.title,author:e.volumeInfo.authors,thumbnail:e.volumeInfo.imageLinks.thumbnail,description:e.volumeInfo.description}])})))}))}(e)},children:k.filter((function(t){return t.description===e.volumeInfo.description})).length?Object(w.jsx)(B.b,{}):"add to shelf"})]},Object(T.a)())}))}),function(e){var t=b[e];return t&&Object(w.jsxs)(P.a,{theme:o,style:A,isOpen:L,modalIndex:e,onRequestClose:function(){return Y()},children:[Object(w.jsx)("button",{style:{position:"absolute",top:5,left:5,border:"none"},onClick:function(){return Y()},children:Object(w.jsx)(B.a,{size:20})}),Object(w.jsx)("div",{children:Object(w.jsx)("img",{src:t.volumeInfo.imageLinks.thumbnail,alt:t.volumeInfo.title})}),Object(w.jsxs)("div",{children:[Object(w.jsx)("p",{children:t.volumeInfo.description}),Object(w.jsx)("p",{children:"by ".concat(t.volumeInfo.authors.join(", "))})]}),Object(w.jsx)("div",{children:Object(w.jsx)("button",{onClick:function(){return Y()},children:"close"})})]})}(F)]})},H=n(27),Q=n(29),$=g.c.form(Y||(Y=Object(f.a)(["\n  margin: 0 auto;\n  width: 85%;\n  max-width: 1400px;\n  display: block;\n  padding: 5px;\n"]))),ee=g.c.input(V||(V=Object(f.a)(["\n  width: 75%;\n  border-radius: 5px;\n  font-size: 16px;\n  padding: 5px;\n  margin: 5px;\n"]))),te=g.c.p(K||(K=Object(f.a)(["\n  font-size: 12px;\n  margin: 10px;\n"]))),ne=g.c.button(Z||(Z=Object(f.a)(["\n  height: 2.5em;\n  border-radius: 5px;\n  background-color: #d84b37;\n  font-size: 18px;\n  margin: 10px;\n"]))),ce=g.c.button(J||(J=Object(f.a)(["\n  height: 2em;\n  border-radius: 5px;\n  font-size: 16px;\n  border-radius: 5px;\n  margin: 20px;\n  background-color: #00adb5;\n"]))),oe=g.c.div(M||(M=Object(f.a)(["\n  margin: 0 auto;\n  width: 85%;\n  max-width: 1400px;\n  display: block;\n  padding: 5px;\n  text-align: center;\n"])));var ie,re,se,ae=function(e){var t=e.username,n=e.setUsername,c=e.isLoggedIn,o=e.setIsLoggedIn,i=e.theme,s=e.user_UID;A.content.background=i.background;var a=Object(r.useState)(!1),l=Object(u.a)(a,2),j=l[0],d=l[1],m=Object(r.useState)(""),g=Object(u.a)(m,2),f=g[0],p=g[1],v=Object(r.useState)({username:"",email:"",password:"",confirmPassword:""}),y=Object(u.a)(v,2),k=y[0],S=y[1],I=Object(r.useState)(Object(T.a)()),C=Object(u.a)(I,2),L=C[0];function z(e){var t=e.target,n=t.name,c=t.value;S((function(e){return Object(_.a)(Object(_.a)({},e),{},Object(H.a)({},n,c))}))}function E(e){p(e.currentTarget.value)}function U(e){e.preventDefault();var t=f;b.sendPasswordResetEmail(t).then((function(){alert("check your email for reset instructions"),d(!1)})).catch((function(e){alert(e+"could not send reset password email"),console.error(e+"could not send reset password email")}))}return C[1],Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{children:c?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(X,{theme:i,username:t,isLoggedIn:c,user_UID:s})}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h3",{children:"Create Your Account"}),Object(w.jsx)(oe,{children:Object(w.jsxs)(ne,{name:"googleSignIn",onClick:function(){n(t),b.signInWithPopup(h).then((function(){o(!0)})).catch((function(e){var t=e.code,n=e.message;o(null),alert("Could not signup: ".concat(t,". ").concat(n))}))},children:[Object(w.jsx)(Q.a,{size:25})," Sign up with Google"]})}),Object(w.jsxs)($,{onSubmit:function(e){e.preventDefault();var t=k.username,c=k.email,o=k.password,i=k.confirmPassword;/^.{6,25}$/g.test(o)?o===i?(n(t),b.createUserWithEmailAndPassword(c,o).then((function(e){return O.collection("users").doc(e.user.uid).set({username:t,email:c,uid:e.user.uid})})).catch((function(e){alert("Error. Could not create account. Please Try again. ".concat(e.code))}))):alert("passwords do not match"):alert("password must be between 6 and 25 characters long")},children:[Object(w.jsx)("h4",{children:"Register"}),Object(w.jsx)(ee,{required:!0,maxLength:"75",name:"username",placeholder:"pick a username",onChange:z}),Object(w.jsx)("br",{}),Object(w.jsx)(ee,{type:"email",required:!0,minLength:"6",maxLength:"75",name:"email",placeholder:"your email",onChange:z}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(ee,{required:!0,placeholder:"create a password",name:"password",type:"password",onChange:z}),Object(w.jsx)(ee,{required:!0,placeholder:"confirm your password",name:"confirmPassword",type:"password",onChange:z}),Object(w.jsx)(te,{children:"Password must be at least 6 characters long"}),Object(w.jsx)(ce,{type:"submit",children:"create my account"}),Object(w.jsx)("hr",{}),Object(w.jsx)("div",{children:Object(w.jsxs)("p",{children:["Already have an account?",Object(w.jsx)("br",{}),Object(w.jsx)(ce,{children:Object(w.jsx)(x.b,{to:"/signin",children:"sign in"})})]})})]},L),Object(w.jsx)(oe,{children:Object(w.jsxs)("p",{children:["Forgot Your Password?",Object(w.jsx)("br",{}),Object(w.jsx)(ce,{onClick:function(){return d(!0)},children:"reset password"})]})})]})}),Object(w.jsx)("div",{children:Object(w.jsx)(P.a,{theme:i,isOpen:j,onRequestClose:function(){return d(!1)},style:A,children:Object(w.jsxs)($,{onSubmit:U,children:[Object(w.jsx)("h3",{children:"Password Reset"}),Object(w.jsx)("p",{children:"An email with reset instructions will be sent to:"}),Object(w.jsx)("input",{style:{margin:20},onChange:E,placeholder:"yourname@email.com",type:"email",name:"email",required:!0}),Object(w.jsx)("br",{}),Object(w.jsx)("button",{type:"submit",style:{margin:5},children:"send email"}),Object(w.jsx)("button",{onClick:function(){return d(!1)},style:{margin:5},children:"cancel"})]})})})]})},le=n(30),ue=n.n(le);P.a.setAppElement("#root");var je=g.c.p(ie||(ie=Object(f.a)(["\n  font-size: 18px;\n  display: inline;\n  padding: 10px;\n"]))),de=g.c.p(re||(re=Object(f.a)(["\n  margin: 0 auto;\n  max-width: 75%;\n  padding: 20px;\n"]))),be=g.c.button(se||(se=Object(f.a)(["\n  display: inline;\n  margin: 20px;\n  padding: 5px;\n"])));var he=function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn,c=e.username,o=e.user_UID,i=e.theme;A.content.background=i.background;var s=Object(r.useState)([]),a=Object(u.a)(s,2),l=a[0],j=a[1],d=Object(r.useState)([]),m=Object(u.a)(d,2),g=m[0],f=m[1],p=Object(r.useState)(!1),v=Object(u.a)(p,2),y=v[0],k=v[1],S=Object(r.useState)(-1),I=Object(u.a)(S,2),C=I[0],L=I[1];function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;L(e),k((function(e){return!e}))}return Object(r.useEffect)((function(){O.collection("users/".concat(o,"/shelf")).onSnapshot((function(e){e.forEach((function(e){var t=e.data();f((function(e){return[].concat(Object(D.a)(e),[{title:t.title,thumbnail_URL:t.thumbnail,author:t.author,description:t.description}])}))}))}))}),[]),Object(r.useEffect)((function(){fetch("https://api.nytimes.com/svc/books/v3/lists/current/hardcover-nonfiction.json?api-key=".concat("ZBNkKwVoxAnqdKFd3GyMy5QVkohGhdnD")).then((function(e){if(e.ok)return e.json()})).then((function(e){j(e.results.books)})).catch((function(e){return console.error("error: ".concat(e))}))}),[]),Object(w.jsxs)("div",{children:[t?Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{children:[Object(w.jsx)(q.a,{}),Object(w.jsx)(je,{children:"".concat(c)})]}),Object(w.jsx)(be,{children:Object(w.jsx)(x.b,{to:"/shelf",children:"go to my shelf"})}),Object(w.jsx)(be,{children:Object(w.jsx)(x.b,{to:"/search",children:"search all books"})})]}):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h1",{children:"Virtual Bookshelf"}),Object(w.jsx)(G.a,{size:140}),Object(w.jsxs)(de,{children:["Miss the feeling of putting hardcovers and paperbacks on your bookshelf? If you listen to audiobooks or read e-books now you can visualize your collection with Virtual Bookshelf. Create an account, search for books to add to your shelf and show your friends what you've been reading!",Object(w.jsx)("br",{})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("h5",{children:"Create an Account or sign up with Google"}),Object(w.jsx)(ne,{style:{backgroundColor:"#00adb5"},children:Object(w.jsx)(x.b,{to:"/signup",children:"Sign up"})}),Object(w.jsxs)(ne,{name:"googleSignIn",onClick:function(){b.signInWithPopup(h).then((function(){n(!0)})).catch((function(e){var t=e.code,n=e.message;alert("Error could not sign in. Please Try again."),console.warn("".concat(t,". ").concat(n))}))},children:[Object(w.jsx)(Q.a,{size:25})," Sign up with Google"]})]})]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:"What have you read lately?"}),Object(w.jsxs)("h5",{style:{textDecoration:"underline"},children:[" ","See what's popular! Checkout the NYT Best Sellers:"]}),l.length?l.map((function(e,n){return Object(w.jsxs)(W,{children:[Object(w.jsx)("img",{style:{maxWidth:"100%"},src:e.book_image,alt:e.title}),Object(w.jsx)("div",{children:e.title}),Object(w.jsx)("div",{children:e.contributor}),Object(w.jsxs)("div",{children:["Rank: ",e.rank]}),Object(w.jsx)("button",{onClick:function(){return z(n)},children:Object(w.jsx)(G.b,{size:16})}),t&&Object(w.jsx)("button",{onClick:function(){return function(e){var t=O.collection("users").doc("".concat(o)).collection("shelf").doc("".concat(e.title));t.get().then((function(n){n.exists?(t.delete().then((function(){return console.log("book deleted")})).catch((function(e){return alert("could not delete book"+e)})),f(g.filter((function(t){return t.title!==e.title})))):(t.set({title:e.title,author:e.author,thumbnail:e.book_image,description:e.description}).then((function(){console.log("doc successfully written")})).catch((function(e){alert("Please sign in or create an account to create your shelf"),console.error("error writing doc: ",e)})),f((function(t){return[].concat(Object(D.a)(t),[{title:e.title,author:e.author,thumbnail:e.book_image,description:e.description}])})))}))}(e)},children:g.some((function(t){return t.title===e.title&&t.author===e.author}))?Object(w.jsx)(B.b,{}):"add to shelf"})]},Object(T.a)())})):Object(w.jsx)(ue.a,{type:"ThreeDots",color:"#00adb5",height:50,width:50,timeout:9e3})]}),function(e){var t=l[e];return t&&Object(w.jsxs)(P.a,{theme:i,style:A,isOpen:y,modalIndex:e,onRequestClose:function(){return z()},children:[Object(w.jsx)("img",{src:t.book_image,alt:t.title,width:"250"}),Object(w.jsx)("p",{children:t.description}),Object(w.jsx)("div",{children:Object(w.jsx)("button",{onClick:function(){return z()},children:"close"})})]})}(C),!t&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(de,{style:{marginBottom:-15},children:"Create an account to add books to your shelf"}),Object(w.jsx)(be,{children:Object(w.jsx)(x.b,{to:"/signup",children:"Sign up"})})]})]})},Oe=n(54),xe=n.n(Oe);var me=function(e){var t=e.user_UID,n=e.isLoggedIn,c=e.username,o=e.theme;A.content.background=o.background;var i=Object(r.useState)(!0),s=Object(u.a)(i,2),a=s[0],l=s[1],j=Object(r.useState)([]),d=Object(u.a)(j,2),b=d[0],h=d[1],m=Object(r.useState)(!1),g=Object(u.a)(m,2),f=g[0],p=g[1],v=Object(r.useState)(-1),k=Object(u.a)(v,2),S=k[0],I=k[1],C=Object(r.useState)(!1),L=Object(u.a)(C,2),z=L[0],E=L[1],U=!(!n||!b.length);function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;I(e),p((function(e){return!e}))}function F(e){e.preventDefault(),xe.a.sendForm("service_tq89xn1","template_9ww6k7i",e.target,"user_UEiB9JmfoIUSh0FdsKFZE").then((function(e){alert("Success! Your email has been sent. Thanks for sharing"),console.log(e.text)}),(function(e){alert(e+"Could not send email. Double check the email address and try again.")})),E(!1),e.target.reset()}return Object(r.useEffect)((function(){O.collection("users/".concat(t,"/shelf")).onSnapshot((function(e){e.forEach((function(e){var t=e.data();h((function(e){return[].concat(Object(D.a)(e),[{title:t.title,thumbnail_URL:t.thumbnail,author:t.author,description:t.description}])}))}))}))}),[]),Object(r.useEffect)((function(){a&&setTimeout((function(){l(!1)}),1e3)}),[a]),Object(w.jsxs)(w.Fragment,{children:[n&&Object(w.jsxs)("div",{children:[Object(w.jsx)(q.a,{}),Object(w.jsx)(je,{children:"".concat(c)})]}),Object(w.jsx)("h1",{children:"My Shelf"}),Object(w.jsx)("div",{style:{margin:"0 auto",padding:30},children:Object(w.jsx)(y.a,{size:170})}),Object(w.jsx)("div",{children:U&&Object(w.jsx)("button",{onClick:function(){return E(!0)},children:"Share shelf"})}),a?Object(w.jsx)(ue.a,{type:"ThreeDots",color:"#00adb5",height:50,width:50}):Object(w.jsx)(N,{children:b.length?b.map((function(e,c){return Object(w.jsxs)(W,{children:[Object(w.jsx)("img",{src:e.thumbnail_URL,alt:e.title,width:"128",height:"195"}),Object(w.jsx)("br",{}),Object(w.jsx)("button",{onClick:function(){return _(c)},children:Object(w.jsx)(G.b,{})}),n&&Object(w.jsx)("button",{onClick:function(){return function(e){if(window.confirm("Are you sure you want to delete ".concat(e.title," from your shelf?"))){l(!0);var n=O.collection("users").doc("".concat(t)).collection("shelf").doc("".concat(e.title));n.get().then((function(e){e.exists&&(n.delete().then((function(){return console.log("book deleted")})).catch((function(e){return console.error("could not delete book"+e)})),h(b.filter((function(e){return e.title===n}))))}))}}(e)},children:Object(w.jsx)(B.b,{})})]},Object(T.a)())})):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{style:{margin:"0 auto",paddingTop:40},children:[Object(w.jsx)("h4",{children:"Your shelf is empty. Search for books to add to your shelf"}),Object(w.jsx)("button",{style:{margin:30},children:Object(w.jsx)(x.b,{to:"/search",children:"Search"})})]}),Object(w.jsx)("br",{})]})}),Object(w.jsx)("div",{children:Object(w.jsx)(P.a,{theme:o,isOpen:z,onRequestClose:function(){return E(!1)},style:A,children:Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)($,{className:"contact-form",onSubmit:F,children:[Object(w.jsx)("h4",{children:"Share your bookshelf"}),Object(w.jsx)("p",{children:" email this shelf to:"}),Object(w.jsx)("input",{type:"hidden",name:"username",value:String(c).endsWith("s")?"".concat(c,"'"):"".concat(c,"'s")}),Object(w.jsx)("input",{type:"hidden",name:"usernameSingular",value:c}),Object(w.jsx)("input",{type:"hidden",name:"user_UID",value:t}),Object(w.jsx)("input",{type:"hidden",name:"link",value:"https://alexanderolivares.github.io/Virtual-Bookshelf/#/ViewShelf/".concat(t)}),Object(w.jsx)(ee,{type:"email",name:"email",placeholder:"name@email.com",required:!0}),Object(w.jsx)(ce,{type:"submit",children:"share shelf"}),Object(w.jsx)("div",{children:Object(w.jsx)("button",{style:{marginTop:15,borderRadius:5},onClick:function(){return E(!1)},children:"close"})})]})})})}),Object(w.jsx)("div",{children:function(e){var t=b[e];return t&&Object(w.jsxs)(P.a,{theme:o,style:A,isOpen:f,onRequestClose:function(){return _()},children:[Object(w.jsx)("button",{style:{position:"absolute",top:5,left:5,border:"none"},onClick:function(){return _()},children:Object(w.jsx)(B.a,{size:20})}),Object(w.jsx)("img",{width:"128",src:t.thumbnail_URL,alt:t.title}),Object(w.jsx)("p",{children:t.description}),Object(w.jsx)("p",{children:"by ".concat(t.author)}),Object(w.jsx)("div",{children:Object(w.jsx)("button",{onClick:function(){return _()},children:"close"})})]})}(S)})]})},ge=n(55);var fe=function(e){var t=e.isLoggedIn,n=e.setIsLoggedIn,c=e.username,o=e.theme;A.content.background=o.background;var i=Object(r.useState)({email:"",password:""}),s=Object(u.a)(i,2),a=s[0],l=s[1],j=Object(r.useState)(!1),d=Object(u.a)(j,2),O=d[0],x=d[1],m=Object(r.useState)(""),g=Object(u.a)(m,2),f=g[0],p=g[1],v=Object(r.useState)(Object(T.a)()),y=Object(u.a)(v,2),k=y[0],S=y[1];function I(e){var t=e.target,n=t.name,c=t.value;l((function(e){return Object(_.a)(Object(_.a)({},e),{},Object(H.a)({},n,c))}))}function C(e){p(e.currentTarget.value)}function L(e){e.preventDefault();var t=f;b.sendPasswordResetEmail(t).then((function(){alert("check your email for reset instructions"),x(!1)})).catch((function(e){alert(e+"could not send reset password email. Double check your email address and try again."),console.error(e+"could not send reset password email")}))}return Object(w.jsx)("div",{children:t?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(he,{isLoggedIn:t,username:c,theme:o})}):Object(w.jsxs)("div",{children:[Object(w.jsx)("h1",{children:"Sign in"}),Object(w.jsx)("div",{children:Object(w.jsx)(ge.a,{size:100,style:{margin:30}})}),Object(w.jsxs)($,{onSubmit:function(e){e.preventDefault();var t=a.email,c=a.password;l({email:"",password:""}),S(Object(T.a)()),b.signInWithEmailAndPassword(t,c).then((function(){n(!0)})).catch((function(e){alert("".concat(e,". Could not sign in. Try again or reset your password.")),console.log("".concat(e.code," ").concat(e.message))}))},children:[Object(w.jsx)(ee,{required:!0,name:"email",placeholder:"email",onChange:I}),Object(w.jsx)("br",{}),Object(w.jsx)(ee,{required:!0,placeholder:"password",name:"password",type:"password",onChange:I}),Object(w.jsx)("br",{}),Object(w.jsx)(ce,{children:"sign in"}),Object(w.jsx)(te,{children:"or"})]},k),Object(w.jsxs)(ne,{name:"googleSignIn",onClick:function(){b.signInWithPopup(h).then((function(){n(!0)})).catch((function(e){var t=e.code,c=e.message;n(null),alert("Could not signin: ".concat(t).concat(c))}))},children:[Object(w.jsx)(Q.a,{size:25})," Sign in with Google"]}),Object(w.jsx)("div",{children:Object(w.jsxs)("p",{children:["Forgot Your Password?",Object(w.jsx)("br",{}),Object(w.jsx)(ce,{onClick:function(){return x(!0)},children:"reset password"})]})}),Object(w.jsx)("div",{children:Object(w.jsx)(P.a,{theme:o,isOpen:O,onRequestClose:function(){return x(!1)},style:A,children:Object(w.jsxs)($,{onSubmit:L,children:[Object(w.jsx)("h3",{children:"Password Reset"}),Object(w.jsx)("p",{children:"An email with reset instructions will be sent to:"}),Object(w.jsx)("input",{style:{margin:20},onChange:C,placeholder:"yourname@email.com",type:"email",name:"email",required:!0}),Object(w.jsx)("br",{}),Object(w.jsx)("button",{type:"submit",style:{margin:5},children:"send email"}),Object(w.jsx)("button",{onClick:function(){return x(!1)},style:{margin:5},children:"cancel"})]})})})]})})},pe=n(56);var ve=function(e){var t=e.theme;A.content.background=t.background;var n=Object(r.useState)(!0),c=Object(u.a)(n,2),o=c[0],i=c[1],s=Object(r.useState)([]),a=Object(u.a)(s,2),l=a[0],j=a[1],d=Object(r.useState)(!1),b=Object(u.a)(d,2),h=b[0],g=b[1],f=Object(r.useState)(-1),p=Object(u.a)(f,2),v=p[0],y=p[1],k=Object(r.useState)([]),S=Object(u.a)(k,2),I=S[0],C=S[1],L=Object(m.f)(),z=Object.values(L)[0];function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;y(e),g((function(e){return!e}))}return Object(r.useEffect)((function(){O.collection("users/".concat(z,"/shelf")).onSnapshot((function(e){e.forEach((function(e){var t=e.data();j((function(e){return[].concat(Object(D.a)(e),[{title:t.title,thumbnail_URL:t.thumbnail,author:t.author,description:t.description}])}))}))}))}),[]),Object(r.useEffect)((function(){O.collection("users/").onSnapshot((function(e){e.forEach((function(e){var t=e.data();if(t.uid===z){var n=t.username;n=String(n).endsWith("s")?"".concat(n,"'"):"".concat(n,"'s"),C(n)}}))}))}),[]),Object(r.useEffect)((function(){o&&setTimeout((function(){i(!1)}),2e3)}),[o]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("h1",{children:[I," Shelf"]}),Object(w.jsx)("div",{style:{margin:"0 auto",padding:30},children:Object(w.jsx)(pe.a,{size:170})}),o?Object(w.jsx)(ue.a,{type:"ThreeDots",color:"#00adb5",height:50,width:50}):Object(w.jsx)(N,{children:l.length?l.map((function(e,t){return Object(w.jsxs)(W,{children:[Object(w.jsx)("img",{src:e.thumbnail_URL,alt:e.title,width:"128",height:"195"}),Object(w.jsx)("br",{}),Object(w.jsx)("button",{onClick:function(){return E(t)},children:Object(w.jsx)(G.b,{})})]},Object(T.a)())})):Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{style:{margin:"0 auto",paddingTop:40},children:[Object(w.jsxs)("h4",{children:["sharer's"," shelf is empty."]}),Object(w.jsx)("button",{style:{margin:30},children:Object(w.jsx)(x.b,{to:"/search",children:"Search"})})]}),Object(w.jsx)("br",{})]})}),Object(w.jsx)("div",{children:function(e){var n=l[e];return n&&Object(w.jsxs)(P.a,{theme:t,style:A,isOpen:h,onRequestClose:function(){return E()},children:[Object(w.jsx)("button",{style:{position:"absolute",top:5,left:5,border:"none"},onClick:function(){return E()},children:Object(w.jsx)(B.a,{size:20})}),Object(w.jsx)("img",{width:"128",src:n.thumbnail_URL,alt:n.title}),Object(w.jsx)("p",{children:n.description}),Object(w.jsx)("p",{children:"by ".concat(n.author)}),Object(w.jsx)("div",{children:Object(w.jsx)("button",{onClick:function(){return E()},children:"close"})})]})}(v)})]})};var ye=function(){var e=Object(r.useState)(v),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(""),i=Object(u.a)(o,2),s=i[0],a=i[1],l=Object(r.useState)(null),j=Object(u.a)(l,2),d=j[0],h=j[1],f=Object(r.useState)(null),p=Object(u.a)(f,2),y=p[0],k=p[1],S=Object(r.useState)(null),I=Object(u.a)(S,2),C=I[0],L=I[1];return b.onAuthStateChanged((function(e){if(e){var t=O.collection("users").doc("".concat(e.uid));h(e.uid),k(!0),L(e.email),t.get().then((function(t){if(!t.exists)return console.log("New user: ".concat(e.displayName," was created")),a(e.displayName),O.collection("users").doc(e.uid).set({username:e.displayName,email:e.email,uid:e.uid});var n=t.data();a(e.displayName||n.username)})).catch((function(e){alert("".concat(e,". Could not sign in. Please try again.")),console.warn("Error getting document:",e)}))}else k(null)})),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(R,{theme:n}),Object(w.jsx)(g.a,{theme:n,children:Object(w.jsx)(x.a,{children:Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(U,{theme:n,setTheme:c,username:s,setUsername:a,isLoggedIn:y,setIsLoggedIn:k,setUserEmail:L}),Object(w.jsx)("div",{className:"content",children:Object(w.jsxs)(m.c,{children:[Object(w.jsx)(m.a,{exact:!0,path:"/",children:Object(w.jsx)(he,{theme:n,username:s,user_UID:d,setIsLoggedIn:k,isLoggedIn:y})}),Object(w.jsx)(m.a,{exact:!0,path:"/search",children:Object(w.jsx)(X,{theme:n,user_UID:d,isLoggedIn:y,username:s})}),Object(w.jsx)(m.a,{exact:!0,path:"/signin",children:Object(w.jsx)(fe,{theme:n,username:s,setUsername:a,setIsLoggedIn:k,isLoggedIn:y})}),Object(w.jsx)(m.a,{exact:!0,path:"/signup",children:Object(w.jsx)(ae,{theme:n,userEmail:C,username:s,setUsername:a,setIsLoggedIn:k,isLoggedIn:y,user_UID:d})}),Object(w.jsx)(m.a,{exact:!0,path:"/shelf/",children:Object(w.jsx)(me,{theme:n,username:s,user_UID:d,isLoggedIn:y})}),Object(w.jsx)(m.a,{exact:!0,path:"/ViewShelf/:uid",children:Object(w.jsx)(ve,{theme:n,username:s,user_UID:d,isLoggedIn:y})})]})})]})})})]})},ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,106)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),i(e),r(e)}))};n(102);l.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(ye,{})}),document.getElementById("root")),ke()},61:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.b13f583d.chunk.js.map